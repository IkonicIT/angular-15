<ngx-spinner
  bdColor="rgba(51, 51, 51, 0.8)"
  size="default"
  color="#fff"
  type="ball-clip-rotate"
></ngx-spinner>

<div class="container-fluid p-0">
  <app-header></app-header>

  <div class="side-bar-margin">
    <app-sidebar></app-sidebar>
  </div>

  <!-- Main content -->
  <main class="main">
    <div
      class="row"
      style="
        background-color: white;
        border-bottom: 1px solid gray;
        margin-bottom: 4%;
      "
    >
      <div
        class="col-12 col-md-12 col-lg-2"
        style="padding-left: 15px; padding-right: 15px; position: relative"
      >
        <ol
          class="breadcrumb"
          style="
            float: left;
            border-bottom: none;
            margin-left: 64px;
            padding-top: 16px;
            padding-bottom: 12px;
            width: auto;
          "
        >
          <app-breadcrumbs></app-breadcrumbs>
        </ol>
      </div>

      <div
        class="col-12 col-md-12 col-lg-10"
        style="
          display: flex;
          flex-wrap: nowrap;
          align-items: center;
          gap: 8px;
          padding: 8px;
          border-bottom: 1px solid #ccc;
          overflow-x: visible;
        "
      >
        <a
          *ngIf="userSelectedCompany.companyid != 0 && !noLogo"
          style="display: inline-flex; align-items: center;"
        >
          <img
            [src]="imageSource"
            style="height: 50px; max-width: 100%; object-fit: contain;"
          />
        </a>

                  <div
              class="btn-group float-right margin-new-top"
              data-bs-placement="bottom"
              data-bs-toggle="tooltip"
              title="click here to Manage Companies"
              style="float: right; margin-left:64px"
            >
              <ngx-select-dropdown
                [(ngModel)]="userSelectedCompany1"
                (change)="selectRootCompany($event)"
                [config]="ngxconfig"
                [options]="userCompanies"
                tabindex="0"
                class="text-overflow-button"
              ></ngx-select-dropdown>

              <alert type="danger" *ngIf="highestRank == 0">
                This account has been disabled for this company. <br />
              </alert>
            </div>
        <input
          [(ngModel)]="itemTag"
          [disabled]="userSelectedCompany.companyid == 0 || highestRank == 0"
          [typeahead]="suggessions"
          (ngModelChange)="getSuggessions(itemTag)"
          typeaheadOptionField="tag"
          (keyup.enter)="navigateToItems()"
          placeholder="#Tag"
          style="
            flex: 0 0 80px;
            padding: 4px;
            min-width: 80px;
          "
        />

        <div style="flex: 0 1 160px;">
          <app-dropdown-treeview-select
            [items]="items"
            [(value)]="value"
            (valueChange)="selectRootItemType($event)"
          ></app-dropdown-treeview-select>
        </div>

        <button
          (click)="navigateToItems()"
          [disabled]="userSelectedCompany.companyid == 0 || highestRank == 0"
          class="btn btn-danger"
          style="padding: 5px 10px;"
        >
          GO
        </button>

         <div style="margin-left: auto; display: flex; gap: 8px; min-width: max-content;">
        <button
          *ngIf="masterSearchFlag == 'false'"
          (click)="navigateToAdvanceItemSearch()"
          [disabled]="userSelectedCompany.companyid == 0 || highestRank == 0"
          class="btn btn-danger"
          style="padding: 5px 10px; "
        >
          Advanced search
        </button>
        </div>
        <div style="margin-left: auto; display: flex; gap: 8px; min-width: max-content;">
          <button
            *ngIf="isOwnerAdmin == 'true' && userSelectedCompany.companyid == 0"
            (click)="navigateToMasterSearch()"
            class="btn btn-danger"
            style="padding: 5px 10px;"
          >
            Master search
          </button>

          <button
            *ngIf="isOwnerAdmin == 'true' && userSelectedCompany.companyid == 0"
            (click)="navigateToMasterPieCharts()"
            class="btn btn-danger"
            style="padding: 5px 10px; margin-right: 64px;"
          >
            Master PieCharts
          </button>
        </div>
      </div>
    </div>

    <div style="margin-left: 15px; margin-right: 15px;">
      <router-outlet></router-outlet>
    </div>
  </main>

  <div>
    <app-footer></app-footer>
  </div>
</div>
